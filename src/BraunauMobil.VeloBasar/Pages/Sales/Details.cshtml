@page
@model Sales.DetailsModel

@{
    ViewData["Title"] = $"{Html.DisplayNameFor(x => x.Sale)} #{Model.Sale.Number}";
}

<div class="card my-3">
    <div class="card-header d-flex justify-content-between align-items-md-center">
        <div class="mr-auto"><h5>@ViewData["Title"]</h5></div>
        <div><h5>@Model.Sale.TimeStamp</h5></div>
        @if (Model.Sale.DocumentId == null)
        {
            <a asp-page="/Sales/Print" asp-all-route-data="@Model.GetRoute()" asp-route-saleId="@Model.Sale.Number" target="_blank" class="btn btn-primary mx-1 ml-auto">@Localizer["Drucken"]</a>
        }
        else
        {
            <a asp-page="/ShowFile" asp-route-fileId="@Model.Sale.DocumentId" target="_blank" class="btn btn-primary mx-1 ml-auto">@Localizer["Beleg"]</a>
        }
    </div>
</div>

<div class="card my-3">
    <h5 class="card-header">@Localizer["Artikel"]</h5>
    <div class="card-body p-0">
        <partial name="/Pages/Products/_Table.cshtml" model="@new ProductsViewModel(Model.Basar, Model.Sale.Products.Select(pa => pa.Product))" />
    </div>
</div>

